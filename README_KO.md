# Hon (í˜¼)

[ğŸ‡°ğŸ‡· í•œêµ­ì–´ (Korean)](README_KO.md) | [ğŸ‡ºğŸ‡¸ English](README.md)

**Hon**ì€ [CloudWeGo Netpoll](https://github.com/cloudwego/netpoll) ê¸°ë°˜ì˜ ê³ ì„±ëŠ¥ HTTP ì—”ì§„ ì–´ëŒ‘í„°ì…ë‹ˆë‹¤. í‘œì¤€ `net/http` ì¸í„°í˜ì´ìŠ¤ë¥¼ ìœ ì§€í•˜ë©´ì„œ **Reactor íŒ¨í„´**ì„ í†µí•´ ì••ë„ì ì¸ ë™ì‹œì„± ì²˜ë¦¬ ëŠ¥ë ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

## ğŸš€ ì£¼ìš” íŠ¹ì§•

- **ì••ë„ì ì¸ ë™ì‹œì„±**: **25,000ê°œ ì ‘ì†**ì„ ë‹¨ **6ê°œì˜ ê³ ë£¨í‹´**ìœ¼ë¡œ ì²˜ë¦¬ (99.9% ì ˆê°).
- **ë¦¬ì†ŒìŠ¤ íš¨ìœ¨ì„±**: Thread-per-Connection ë°©ì‹ì˜ ì˜¤ë²„í—¤ë“œë¥¼ ì œê±°í•˜ì—¬ CPU ì‚¬ìš© íš¨ìœ¨ì„ ê·¹ëŒ€í™”í–ˆìŠµë‹ˆë‹¤.
- **í‘œì¤€ í˜¸í™˜ì„±**: `http.Handler` ì¸í„°í˜ì´ìŠ¤ë¥¼ ì™„ë²½í•˜ê²Œ ì§€ì›í•˜ì—¬ `chi`, `gin`, `echo`, `mux` ë“± ê¸°ì¡´ ë¼ìš°í„°ë¥¼ ì½”ë“œ ë³€ê²½ ì—†ì´ ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: Netpollì˜ ê³ ì„±ëŠ¥ ë©”ëª¨ë¦¬ ìºì‹œ(`mcache`)ë¥¼ í™œìš©í•˜ì—¬ ëŒ€ê·œëª¨ íŠ¸ë˜í”½ ìƒí™©ì—ì„œë„ ë©”ëª¨ë¦¬ í• ë‹¹/í•´ì œ ë¹„ìš©ì„ ìµœì†Œí™”í•˜ê³  ì•ˆì •ì ì¸ ì„±ëŠ¥ì„ ìœ ì§€í•©ë‹ˆë‹¤.
- **Zero-Allocation**: ìì²´ WebSocket íŒŒì„œë¡œ í—¤ë” íŒŒì‹± ì‹œ **0 allocs/op** ë‹¬ì„±.
- **ìŠ¤íŠ¸ë¦¬ë° ìµœì í™”**: 64KB ë‹¨ìœ„ ì²­í¬ ì²˜ë¦¬ë¥¼ í†µí•´ ëŒ€ìš©ëŸ‰ ë°ì´í„°ë„ íš¨ìœ¨ì ìœ¼ë¡œ ì „ì†¡.

## ğŸ“Š ì„±ëŠ¥ ë¹„êµ (Hon vs í‘œì¤€ ì„œë²„)

macOS M4 ë¡œì»¬ í™˜ê²½ í…ŒìŠ¤íŠ¸ ê²°ê³¼ì…ë‹ˆë‹¤.

### 1. HTTP ì²˜ë¦¬ëŸ‰ (RPS)
| ëª¨ë“œ | ì´ˆë‹¹ ìš”ì²­ ìˆ˜ (RPS) | ì„±ëŠ¥ í–¥ìƒ |
| :--- | :--- | :--- |
| í‘œì¤€ (`net/http`) | 129,616 | - |
| **Hon** | **233,404** | **+80%** |

> **ë¶„ì„ ê²°ê³¼**: 
> - **Hon**: **Reactor íŒ¨í„´** (Netpoll)ê³¼ íš¨ìœ¨ì ì¸ ë©”ëª¨ë¦¬ í’€ë§ì„ í†µí•´ í‘œì¤€ ëŒ€ë¹„ **+80%** ë” ë†’ì€ ì„±ëŠ¥ì„ ê¸°ë¡í–ˆìŠµë‹ˆë‹¤.

### 2. WebSocket íš¨ìœ¨ì„± (15,000ê°œ ì—°ê²°)
| ëª¨ë“œ | ì‚¬ìš© ì¤‘ì¸ ê³ ë£¨í‹´ ìˆ˜ | ë¦¬ì†ŒìŠ¤ ì ˆê° |
| :--- | :--- | :--- |
| í‘œì¤€ (`gorilla`) | 15,005 ê°œ | - |
| **Hon** | **6 ê°œ** | **99.96% ì ˆê°** |

> **í•µì‹¬ ìš”ì•½**: 
> - **Standard**: ì—°ê²°ë‹¹ 1ê°œì˜ ê³ ë£¨í‹´ì„ ìƒì„±í•˜ì—¬ 15,005ê°œì˜ ê³ ë£¨í‹´ì´ ì‹¤í–‰ë©ë‹ˆë‹¤. ì´ëŠ” ëŒ€ê·œëª¨ ì ‘ì† ì‹œ ì¹˜ëª…ì ì¸ ìŠ¤ì¼€ì¤„ë§ ë³‘ëª©ì„ ìœ ë°œí•©ë‹ˆë‹¤.
> - **Hon**: ë‹¨ **6ê°œì˜ ê³ ë£¨í‹´**ë§Œìœ¼ë¡œ 15,000ê°œì˜ ì—°ê²°ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. Netpollì˜ `mcache`ì™€ ë²„í¼ í’€ë§ìœ¼ë¡œ ì¸í•´ ì´ˆê¸° ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì€ ë‹¤ì†Œ ë†’ì§€ë§Œ, ëŸ°íƒ€ì„ GC ì˜¤ë²„í—¤ë“œê°€ ê±°ì˜ ì—†ì–´ ê·¹í•œì˜ ìƒí™©(C10M)ì—ì„œë„ ì„±ëŠ¥ ì €í•˜ ì—†ì´ í™•ì¥ë©ë‹ˆë‹¤.

## ğŸ“¦ ì‹œì‘í•˜ê¸°

```bash
# 1. ì„¤ì¹˜
go get github.com/DevNewbie1826/hon

# 2. ì˜ˆì œ ì‹¤í–‰
go run cmd/example/main.go -type hon
```

## ğŸ’¡ ì‚¬ìš©ë²• ì˜ˆì‹œ

```go
func main() {
    mux := http.NewServeMux()
    
    // 1. í‘œì¤€ HTTP í•¸ë“¤ëŸ¬ (Gin, Chi, Echo ë“± í˜¸í™˜)
    mux.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        w.Write([]byte("Hello, Hon!"))
    })

    // 2. Hon ìµœì í™” WebSocket
    mux.HandleFunc("/ws", func(w http.ResponseWriter, r *http.Request) {
        adaptor.Upgrade(w, r, &MyWSHandler{})
    })

    eng := engine.NewEngine(mux)
    server.NewServer(eng).Serve(":1826")
}

type MyWSHandler struct { websocket.DefaultHandler }
func (h *MyWSHandler) OnMessage(c net.Conn, op ws.OpCode, payload []byte, fin bool) {
    // ê³ ë£¨í‹´ ìƒì„± ì—†ì´ ì´ë²¤íŠ¸ ë£¨í”„ì—ì„œ ì¦‰ì‹œ ì‹¤í–‰ë©ë‹ˆë‹¤.
    wsutil.WriteServerMessage(c, op, payload)
}
```

## ğŸ“„ ë¼ì´ì„ ìŠ¤
MIT License